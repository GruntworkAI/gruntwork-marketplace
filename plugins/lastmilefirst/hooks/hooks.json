{
  "description": "Lastmilefirst Overwatch - proactive checks and reminders (cross-platform)",
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session_start.py",
            "timeout": 10000
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"from pathlib import Path; d = Path.home() / '.claude' / 'tmp'; d.mkdir(parents=True, exist_ok=True); (d / 'session-changes.log').open('a').write('edit\\n')\""
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"from pathlib import Path; d = Path.home() / '.claude' / 'tmp'; d.mkdir(parents=True, exist_ok=True); (d / 'session-changes.log').open('a').write('write\\n')\""
          }
        ]
      },
      {
        "matcher": "Skill",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/log_invocation.py skill"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/log_invocation.py agent"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Quick check before finishing: Look at ~/.claude/tmp/session-changes.log to see if files were modified this session. If the file exists and has content, AND there are uncommitted git changes in the current directory, consider suggesting: 'You have uncommitted changes - want me to commit them?' Only mention this once per session, and only if relevant. If no changes or already committed, say nothing about this."
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"from pathlib import Path; (Path.home() / '.claude' / 'tmp' / 'session-changes.log').unlink(missing_ok=True)\""
          }
        ]
      }
    ]
  }
}
